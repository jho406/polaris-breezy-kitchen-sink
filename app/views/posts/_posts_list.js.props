page_num = params[param_name]
items_per_page = 10

paged_posts = posts
  .page(page_num)
  .per(items_per_page)
  .order(created_at: :desc)

json.resource_name({
  singular: 'post',
  plural: 'posts'
})

json.items do
  json.array! paged_posts do |post|
    json.id post.id
    json.title 'Mae Jemison'
    json.location 'Decantur, USA'
    json.body post.body
    json.created_at post.created_at
    json.updated_at post.updated_at
    json.edit_post_path edit_post_path(post)
    json.post_path post_path(post)
  end
end

needs_pagination = posts.count > items_per_page

if needs_pagination
  json.pagination do
    json.has_previous !paged_posts.first_page?
    json.has_next !paged_posts.last_page?
    json.path_to_next_page path_to_next_page(paged_posts, param_name: param_name)
    json.path_to_prev_page path_to_prev_page(paged_posts, param_name: param_name)
  end
end
